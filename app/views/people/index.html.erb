
<% Person.tag_list.reduce.group_level(1).rows.each do |row| %>
  <%= content_tag :div,  "#{row.key}: #{row.value}" %>
<% end %>


<h1>Listing people</h1>

<table>
  <tr>
    <th><%= link_to "Name", people_path(:sort => :name) %></th>
    <th><%= link_to "Age", people_path(:sort => :age) %></th>
    <th>Tags</th>
    <th>Tag count</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @people.each do |person| %>
  <tr>
    <td><%= person.name %></td>
    <td><%= person.age %></td>
    <td><%= person.tags %></td>
    <td><%= person.tags_count %></td>
    <td><%= link_to 'Show', person %></td>
    <td><%= link_to 'Edit', edit_person_path(person) %></td>
    <td><%= link_to 'Destroy', person, :confirm => 'Are you sure?', :method => :delete %></td>
  </tr>
<% end %>
</table>

<br />

<%= link_to 'New Person', new_person_path %>
